# ============================================
# PalmAstro Backend - Environment Variables Template
# ============================================
# Copy this file to .env and fill in your actual values
# Command: cp env.template .env
# NEVER commit .env to Git!

# ============================================
# OpenAI API Configuration (REQUIRED)
# ============================================
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-proj-your-actual-key-here
OPENAI_MODEL=gpt-4o-mini

# Optional: Override model per feature (if needed)
# PALM_MODEL=gpt-4o-mini
# ASTROLOGY_MODEL=gpt-4o-mini
# NUMEROLOGY_MODEL=gpt-4o-mini

# ============================================
# Django Core Settings
# ============================================
# Generate a secure secret key: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
DJANGO_SECRET_KEY=change-me-in-production-generate-a-secure-key

# Set to false in production
DJANGO_DEBUG=true

# Comma-separated list of allowed hosts (for production)
DJANGO_ALLOWED_HOSTS=localhost,127.0.0.1

# ============================================
# Security Settings
# ============================================
# CORS: Comma-separated list of allowed origins (only used when DEBUG=false)
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# CSRF: Comma-separated list of trusted origins
CSRF_TRUSTED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# SSL: Set to true in production (behind HTTPS proxy)
DJANGO_SECURE_SSL_REDIRECT=false

# ============================================
# Rate Limiting (DRF Throttles)
# ============================================
DRF_THROTTLE_ANON=20/min
DRF_THROTTLE_USER=100/min
DRF_THROTTLE_NUMEROLOGY=10/hour
DRF_THROTTLE_ASTROLOGY=10/hour

# ============================================
# File Upload Limits
# ============================================
DATA_UPLOAD_MAX_MEMORY_SIZE=10485760
FILE_UPLOAD_MAX_MEMORY_SIZE=10485760

# ============================================
# Celery Configuration
# ============================================
# Redis URL for Celery broker and result backend
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Set to true to run tasks synchronously (for testing without Redis)
CELERY_TASK_ALWAYS_EAGER=false

# ============================================
# Data Retention (TTL - Time To Live)
# ============================================
# Palm Reading retention
READING_RETENTION_DAYS=30
IMAGE_TTL_HOURS=24

# Numerology retention
NUMEROLOGY_TTL_DAYS=30
NUMEROLOGY_NO_CONSENT_TTL_DAYS=0

# Astrology session retention
ASTROLOGY_TTL_HOURS=24
ASTROLOGY_NO_CONSENT_TTL_HOURS=0

# ============================================
# Astrology Encryption (REQUIRED for Astrology)
# ============================================
# Generate a Fernet key: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
ASTROLOGY_ENCRYPTION_KEY=your-32-char-base64-encoded-fernet-key-here

# ============================================
# Production Database (Optional - SQLite used by default)
# ============================================
# To use PostgreSQL (recommended for deployment), set these values.
# If DB_NAME is set, Django will automatically switch from SQLite to PostgreSQL.
DB_ENGINE=django.db.backends.postgresql
DB_NAME=palmastro_db
DB_USER=postgres
DB_PASSWORD=your-secure-password
DB_HOST=localhost
DB_PORT=5432

# ============================================
# Notes
# ============================================
# 1. OpenAI API Key: Required for all AI features (palm, numerology, astrology)
# 2. Django Secret Key: Generate a new one for production
# 3. Astrology Encryption Key: Generate using the Python command above
# 4. All TTL values are in days/hours as specified
# 5. Never commit this file or .env to version control

